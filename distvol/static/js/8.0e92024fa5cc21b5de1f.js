webpackJsonp([8],{FSLe:function(t,a){},g2FP:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("mvHQ"),i=e.n(s),n=e("d8Vk"),o=e("jt1B"),r=e("hrFV"),c=e("40GK"),l={name:"",mixins:[],props:{},components:{HeaderTest:n.a,Heder:r.a,Xmap:c.a},data:function(){return{isJoin:!0,activeName:"first",isAlready:!0,isActOk:!1,id:"",actData:{},orgData:{},actUsersData:[],user_info:{},items:[{type:" "},{type:"success"},{type:"danger"},{type:"warning"}],dialogVisible:!1,point:[],address:""}},watch:{},computed:{},created:function(){var t=this;this.id=parseInt(this.$route.params.id),this.axios({method:"POST",url:"/user"}).then(function(a){200==a.status&&1e4==a.data.data.res_status.code&&(void 0!==a.data.data.activity_info.find(function(a){return a.activity_id===t.id&&0==a.status})&&(t.isJoin=!1))}),this.axios({method:"POST",url:"/activity/user",data:i()({id:this.id})}).then(function(a){if(200==a.status&&1e4==a.data.data.res_status.code){t.actUsersData=a.data.data.user,t.actData=a.data.data.activity,a.data.data.activity.fact_num==a.data.data.activity.target_num&&(t.isAlready=!1,t.isActOk=!0),t.axios({method:"POST",url:"/org",data:i()({id:a.data.data.activity.org_id})}).then(function(a){console.log(a),200==a.status&&1e4==a.data.data.res_status.code&&(t.orgData=a.data.data.org)});var e=a.data.data.activity.place.split(";");t.actData.place=e[0],t.point=e[1].split(",")}}).catch(function(t){console.log(t)}),console.log()},mounted:function(){console.log(this.id)},methods:{timestampToTime:o.b,percentage1:function(t,a){return(100*(t/a).toFixed(2)).toFixed(0)},joinAct:function(){var t=this;this.axios({method:"POST",url:"/user"}).then(function(a){console.log(a),200==a.status&&1e4==a.data.data.res_status.code?t.$confirm("确定报名此活动吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.isAlready?(t.user_info=a.data.data.user_info,t.axios({method:"POST",url:"/user/activity",data:i()({user_id:t.user_info.id,activity_id:t.actData.id})}).then(function(a){console.log(a),200==a.status&&1e4==a.data.data.res_status.code&&(t.$message({type:"success",message:"报名成功!"}),t.isJoin=!1,location.reload())})):t.$notify({title:"警告",message:"此活动招募已结束！请查看其他活动！",type:"warning"})}).catch(function(){t.$message({type:"info",message:"已取消报名"})}):20004==a.data.data.res_status.code&&t.$confirm("您未登录，请登录后来操作，是否前去登录?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$router.push("/login")})})}}},d={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"wrapper"},[e("heder"),t._v(" "),e("div",{staticClass:"proWrapper"},[e("div",{staticClass:"proInfo"},[t._m(0),t._v(" "),e("div",{staticClass:"headerInfo"},[e("h2",[t._v(t._s(t.actData.title))]),t._v(" "),t.isAlready?e("el-button",{staticClass:"btn",attrs:{type:"success",round:""}},[t._v("招募中")]):e("el-button",{staticClass:"btn",attrs:{type:"danger",round:""}},[t._v("招募已完成")]),t._v(" "),e("p",[t._v("项目编号："+t._s(t.actData.id))]),t._v(" "),e("p",[t._v("服务类别：\n            "),t._l(t.actData.tag.split(","),function(a,s){return e("el-tag",{key:s,attrs:{type:t.items[s].type,size:"mini",effect:"dark"}},[t._v("\n              "+t._s(a)+"\n            ")])})],2),t._v(" "),e("p",[t._v("项目分享到：")])],1),t._v(" "),e("el-divider"),t._v(" "),e("div",{staticClass:"actInfo"},[e("div",{staticClass:"right"},[e("p",[t._v("发布日期：2021/4/4")]),t._v(" "),e("p",[t._v("项目结束日期："+t._s(t.timestampToTime(t.actData.end_time)))]),t._v(" "),e("p",[t._v("报名人数："+t._s(t.actData.fact_num))])]),t._v(" "),e("div",{staticClass:"left"},[e("p",[t._v("项目地点："+t._s(t.actData.place))]),t._v(" "),e("p",[t._v("项目开始日期："+t._s(t.timestampToTime(t.actData.start_time)))]),t._v(" "),e("p",[t._v("需求人数："+t._s(t.actData.target_num))])])]),t._v(" "),e("div",{staticClass:"fenge"},[e("el-divider")],1),t._v(" "),e("div",{staticClass:"otherInfo"},[e("el-tabs",{attrs:{stretch:""},model:{value:t.activeName,callback:function(a){t.activeName=a},expression:"activeName"}},[e("el-tab-pane",{attrs:{label:"项目详情",name:"first"}},[e("h3",[t._v(t._s(t.actData.desc))])]),t._v(" "),e("el-tab-pane",{attrs:{label:"报名信息",name:"second"}},[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.actUsersData,border:"",stripe:"",height:"250"}},[e("el-table-column",{attrs:{label:"姓名",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v(t._s(a.row.name))]}}])}),t._v(" "),e("el-table-column",{attrs:{label:"手机号",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v(t._s(a.row.phone))]}}])}),t._v(" "),e("el-table-column",{attrs:{label:"年龄",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v(t._s(a.row.age))]}}])}),t._v(" "),e("el-table-column",{attrs:{label:"性别",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v(t._s(0==a.row.gender?"男":"女"))]}}])})],1)],1),t._v(" "),e("el-tab-pane",{attrs:{label:"项目动态",name:"third"}},[e("div",{staticClass:"footer"},[e("p",[t._v("项目进度：")]),t._v(" "),e("el-progress",{staticClass:"progressBar",attrs:{percentage:t.percentage1(t.actData.fact_num,t.actData.target_num)}})],1)])],1)],1)],1),t._v(" "),e("div",{staticClass:"userInfo"},[e("h2",{staticClass:"title"},[t._v("项目发起人")]),t._v(" "),e("div",{staticClass:"org"},[e("img",{attrs:{src:t.orgData.org_pic}}),t._v(" "),e("h2",{staticClass:"orgName"},[t._v(t._s(t.orgData.org_name))]),t._v(" "),e("h3",[t._v("地址："+t._s(t.orgData.org_province+t.orgData.org_town+t.orgData.org_country+t.orgData.org_address))])]),t._v(" "),e("h2",{staticClass:"title"},[t._v("项目联系人")]),t._v(" "),e("h2",{staticClass:"orgUsername"},[t._v(t._s(t.actData.representative))]),t._v(" "),e("h3",[t._v(t._s(t.actData.representative_phone))]),t._v(" "),e("h2",{staticClass:"title"},[t._v("项目地址")]),t._v(" "),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"点击查看详细地址",placement:"right"}},[e("el-link",{attrs:{type:"primary",underline:!1},on:{click:function(a){t.dialogVisible=!0}}},[e("h2",{staticClass:"orgPlace"},[t._v(t._s(t.actData.place))])])],1),t._v(" "),t.isJoin?e("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.isActOk,expression:"!isActOk"}],staticClass:"sub",attrs:{type:"danger",round:"",icon:"el-icon-edit"},on:{click:t.joinAct}},[t._v("报名此项目")]):e("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.isActOk,expression:"!isActOk"}],staticClass:"sub",attrs:{type:"danger",round:"",icon:"el-icon-edit",disabled:""}},[t._v("已报名")]),t._v(" "),e("el-button",{directives:[{name:"show",rawName:"v-show",value:t.isActOk,expression:"isActOk"}],staticClass:"sub",attrs:{type:"danger",round:"",icon:"el-icon-edit",disabled:""}},[t._v("活动已结束")])],1)]),t._v(" "),e("el-dialog",{attrs:{title:"详细地址",visible:t.dialogVisible,width:"50%"},on:{"update:visible":function(a){t.dialogVisible=a}}},[e("xmap",{attrs:{width:"920px",height:"500px",lnglat:t.point,isShow:!1},on:{location:t.location}})],1)],1)},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"img"},[a("img",{attrs:{src:e("5/2Z"),alt:""}})])}]};var _=e("VU/8")(l,d,!1,function(t){e("FSLe")},null,null);a.default=_.exports}});
//# sourceMappingURL=8.0e92024fa5cc21b5de1f.js.map