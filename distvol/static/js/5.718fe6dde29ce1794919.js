webpackJsonp([5],{Dmu7:function(e,t){},Nl6a:function(e,t,r){e.exports=r.p+"static/img/login.066d882.png"},OXzp:function(e,t){},YG5A:function(e,t,r){"use strict";var o={name:"identify-code",props:{identifyCode:{type:String,default:"1234"},fontSizeMin:{type:Number,default:16},fontSizeMax:{type:Number,default:40},backgroundColorMin:{type:Number,default:180},backgroundColorMax:{type:Number,default:240},colorMin:{type:Number,default:50},colorMax:{type:Number,default:160},lineColorMin:{type:Number,default:40},lineColorMax:{type:Number,default:180},dotColorMin:{type:Number,default:0},dotColorMax:{type:Number,default:255},contentWidth:{type:Number,default:112},contentHeight:{type:Number,default:38}},methods:{randomNum:function(e,t){return Math.floor(Math.random()*(t-e)+e)},randomColor:function(e,t){return"rgb("+this.randomNum(e,t)+","+this.randomNum(e,t)+","+this.randomNum(e,t)+")"},drawPic:function(){var e=document.getElementById("s-canvas").getContext("2d");e.textBaseline="bottom",e.fillStyle=this.randomColor(this.backgroundColorMin,this.backgroundColorMax),e.fillRect(0,0,this.contentWidth,this.contentHeight);for(var t=0;t<this.identifyCode.length;t++)this.drawText(e,this.identifyCode[t],t);this.drawLine(e),this.drawDot(e)},drawText:function(e,t,r){e.fillStyle=this.randomColor(this.colorMin,this.colorMax),e.font=this.randomNum(this.fontSizeMin,this.fontSizeMax)+"px SimHei";var o=(r+1)*(this.contentWidth/(this.identifyCode.length+1)),i=this.randomNum(this.fontSizeMax,this.contentHeight-5),a=this.randomNum(-45,45);e.translate(o,i),e.rotate(a*Math.PI/180),e.fillText(t,0,0),e.rotate(-a*Math.PI/180),e.translate(-o,-i)},drawLine:function(e){for(var t=0;t<8;t++)e.strokeStyle=this.randomColor(this.lineColorMin,this.lineColorMax),e.beginPath(),e.moveTo(this.randomNum(0,this.contentWidth),this.randomNum(0,this.contentHeight)),e.lineTo(this.randomNum(0,this.contentWidth),this.randomNum(0,this.contentHeight)),e.stroke()},drawDot:function(e){for(var t=0;t<100;t++)e.fillStyle=this.randomColor(0,255),e.beginPath(),e.arc(this.randomNum(0,this.contentWidth),this.randomNum(0,this.contentHeight),1,0,2*Math.PI),e.fill()}},watch:{identifyCode:function(){this.drawPic()}},mounted:function(){this.drawPic()}},i={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"s-canvas"},[t("canvas",{attrs:{id:"s-canvas",width:this.contentWidth,height:this.contentHeight}})])},staticRenderFns:[]};var a=r("VU/8")(o,i,!1,function(e){r("OXzp")},"data-v-45338094",null);t.a=a.exports},rwea:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("mvHQ"),i=r.n(o),a=r("YG5A"),s=r("d8Vk"),n=r("hrFV"),l={name:"",mixins:[],props:{},components:{HeaderTest:s.a,IdentifyCode:a.a,Heder:n.a},data:function(){var e=this;return{identifyCodes:"ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz0123456789",identifyCode:"",activeName:"first",volunteerForm:{user_name:"",password:"",verificationCode:""},orgForm:{org_user_name:"",org_password:""},rules:{user_name:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:1,max:15,message:"长度在 1 到 15 个字符",trigger:"blur"}],org_user_name:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:1,max:15,message:"长度在 1 到 15 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:15,message:"长度在 1 到 15 个字符",trigger:"blur"}],org_password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:15,message:"长度在 1 到 15 个字符",trigger:"blur"}],verificationCode:[{required:!0,message:"请输入密码",trigger:"blur"},{validator:function(t,r,o){return""===r?o(new Error("验证码不能为空")):r.toLowerCase()!==e.identifyCode.toLowerCase()?o(new Error("验证码输入不正确!")):o()},trigger:"blur"}]},isLoginVol:!1,isLoginOrg:!1}},watch:{},computed:{},created:function(){var e=this;this.axios({method:"POST",url:"/user"}).then(function(t){200==t.status&&1e4==t.data.data.res_status.code&&(e.isLoginVol=!0)}),this.axios({method:"POST",url:"/org/login-org"}).then(function(t){200==t.status&&1e4==t.data.data.res_status.code&&(e.isLoginOrg=!0)})},mounted:function(){this.$refs.header.activeIndex="4",this.identifyCode="",this.makeCode(this.identifyCodes,4)},methods:{randomNum:function(e,t){return Math.floor(Math.random()*(t-e)+e)},refreshCode:function(){this.identifyCode="",this.makeCode(this.identifyCodes,4)},makeCode:function(e,t){for(var r=0;r<t;r++)this.identifyCode+=this.identifyCodes[this.randomNum(0,this.identifyCodes.length)]},openEnrol:function(){this.$router.push("/enroll")},volLogin:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return t.$message.error("请输入正确格式的用户名或密码"),!1;t.isLoginOrg?t.$notify.error({title:"错误",message:"已经登录组织用户，请先退出组织在重新登录！"}):t.axios({method:"POST",url:"/user/login",data:i()({user_name:t.volunteerForm.user_name,password:t.volunteerForm.password})}).then(function(e){console.log(e),200==e.status&&1e4==e.data.data.res_status.code?(t.$message({message:"登录成功",type:"success"}),1==e.data.data.user.user_type?t.$router.push("/admin/index"):t.$router.push("/index")):20001==e.data.data.res_status.code?t.$message.error("账号或密码错误！"):20003==e.data.data.res_status.code&&t.$message.error("用户已登录，请勿重复登录！")})})},orgLogin:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return t.$message.error("请输入正确格式的用户名或密码"),!1;t.isLoginVol?t.$notify.error({title:"错误",message:"已经登录志愿者用户，请先退出志愿者用户在重新登录！"}):t.axios({method:"POST",url:"/org/login",data:i()({org_user_name:t.orgForm.org_user_name,org_password:t.orgForm.org_password})}).then(function(e){console.log(e),200==e.status&&1e4==e.data.data.res_status.code?(t.$message({message:"登录成功",type:"success"}),t.$router.push("/index")):30002==e.data.data.res_status.code?t.$message.error("账号或密码错误！"):30003==e.data.data.res_status.code&&t.$message.error("组织用户已登录，请勿重复登录！")})})}}},d={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("heder"),e._v(" "),r("div",{staticClass:"yetou"},[r("span"),e._v(" "),r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),r("el-breadcrumb-item",[e._v("登录")])],1)],1),e._v(" "),r("el-divider",[r("i",{staticClass:"el-icon-edit-outline"})]),e._v(" "),r("div",{staticClass:"loginWrapper"},[e._m(0),e._v(" "),r("div",{staticClass:"info"},[r("el-tabs",{attrs:{stretch:"",type:"border-card"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[r("el-tab-pane",{attrs:{label:"志愿者登录",name:"first"}},[r("el-form",{ref:"volform",staticClass:"formWrapper",attrs:{"status-icon":"",model:e.volunteerForm,rules:e.rules,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"用户名",prop:"user_name"}},[r("el-input",{attrs:{placeholder:"请输入志愿者用户名"},model:{value:e.volunteerForm.user_name,callback:function(t){e.$set(e.volunteerForm,"user_name",t)},expression:"volunteerForm.user_name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:e.volunteerForm.password,callback:function(t){e.$set(e.volunteerForm,"password",t)},expression:"volunteerForm.password"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"验证码",prop:"verificationCode"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.volunteerForm.verificationCode,callback:function(t){e.$set(e.volunteerForm,"verificationCode",t)},expression:"volunteerForm.verificationCode"}}),e._v(" "),r("div",{staticClass:"codeWrapper",on:{click:e.refreshCode}},[r("identify-code",{attrs:{identifyCode:e.identifyCode,contentWidth:150,contentHeight:40,fontSizeMin:40}})],1)],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.volLogin("volform")}}},[e._v("登录")])],1),e._v(" "),r("el-form-item",[r("el-link",{on:{click:e.openEnrol}},[e._v("注册账号"),r("i",{staticClass:"el-icon-view el-icon--right"})])],1)],1)],1),e._v(" "),r("el-tab-pane",{attrs:{label:"组织机构登录",name:"second"}},[r("el-divider"),e._v(" "),r("el-form",{ref:"orgform",staticClass:"formWrapper",attrs:{model:e.orgForm,rules:e.rules,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"用户名",prop:"org_user_name"}},[r("el-input",{attrs:{placeholder:"请输入组织管理员用户名"},model:{value:e.orgForm.org_user_name,callback:function(t){e.$set(e.orgForm,"org_user_name",t)},expression:"orgForm.org_user_name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"密码",prop:"org_password"}},[r("el-input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:e.orgForm.org_password,callback:function(t){e.$set(e.orgForm,"org_password",t)},expression:"orgForm.org_password"}})],1),e._v(" "),r("el-form-item",{staticClass:"lastItem"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.orgLogin("orgform")}}},[e._v("登录")])],1),e._v(" "),r("el-form-item",[r("el-link",{on:{click:e.openEnrol}},[e._v("注册账号"),r("i",{staticClass:"el-icon-view el-icon--right"})])],1)],1)],1)],1)],1)])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"img"},[t("img",{attrs:{src:r("Nl6a"),alt:""}})])}]};var u=r("VU/8")(l,d,!1,function(e){r("Dmu7")},null,null);t.default=u.exports}});
//# sourceMappingURL=5.718fe6dde29ce1794919.js.map