webpackJsonp([7],{"2i7E":function(e,t){},kNbv:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("mvHQ"),o=a.n(r),l={name:"",mixins:[],props:{},components:{},data:function(){return{usersData:[],dialogVisible:!1,volForm:{user_name:"",password:"",phone:"",name:"",gender:"",user_type:"",age:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:1,max:15,message:"长度在 1 到 15 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:15,message:"长度在 6 到 15 个字符",trigger:"blur"}],telephone:[{required:!0,message:"请输入手机号",trigger:"blur"},{min:11,max:11,message:"请输入正确的手机号！",trigger:"blur"}],level:[{required:!0,message:"请选用户角色",trigger:"change"}]},currentPage:1,total:100,pageSize:5,limit:5,offset:0}},watch:{},computed:{},created:function(){var e=this;this.axios({method:"POST",url:"/users",data:o()({limit:1e3,offset:0,cur_page:0})}).then(function(t){console.log(t),200==t.status&&1e4==t.data.data.res_status.code&&(e.usersData=t.data.data.users)}).catch(function(e){console.log(e)})},mounted:function(){},methods:{deleteUser:function(e){var t=this;console.log(e),this.$confirm("此操作将删除该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.axios({method:"POST",url:"/user/delete",data:o()({id:e})}).then(function(e){console.log(e),200==e.status&&1e4==e.data.data.res_status.code?(t.$message({type:"success",message:"删除成功!"}),location.reload()):t.$message.error(e.data.data.res_status.msg)})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},addVol:function(){var e=this;console.log(o()(this.volForm)),this.axios({method:"POST",url:"/user/register",data:o()(this.volForm)}).then(function(t){200==t.status&&1e4==t.data.data.res_status.code?(e.$message({type:"success",message:"添加成功!"}),location.reload()):e.$message.error(t.data.data.res_status.msg+"!请重新输入!")})},handleCurrentChange:function(e){var t=this;this.offset=(e-1)*this.limit,this.axios({method:"POST",url:"/users",data:o()({offset:this.offset,limit:this.limit,cur_page:0})}).then(function(e){200==e.status&&1e4==e.data.code&&(t.usersData=e.data.data.users)})},handleSizeChange:function(e){var t=this;this.pageSize=this.limit=e,this.axios({method:"POST",url:"/users",data:o()({offset:this.offset,limit:this.limit,cur_page:0})}).then(function(e){200==e.status&&1e4==e.data.code&&(t.usersData=e.data.data.users)})}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.usersData,border:"",stripe:""}},[a("el-table-column",{attrs:{label:"id",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.id))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"用户名",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.user_name))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"姓名",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.name))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"性别",prop:"gender",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s("0"==t.row.gender?"男":"女")+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"年龄",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.age))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"手机号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.phone))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"角色",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s("1"==t.row.user_type?"管理员":"普通用户"))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"注册时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.create_time))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.deleteUser(t.row.id)}}},[e._v("删除")])]}}])},[a("template",{slot:"header"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("添加志愿者"),a("i",{staticClass:"el-icon-plus el-icon--right"})])],1)],2)],1),e._v(" "),a("el-divider"),e._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-size":e.pageSize,"page-sizes":[5,10,20,50],layout:"total, sizes,prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"添加用户",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.volForm,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"用户名",prop:"user_name"}},[a("el-input",{attrs:{placeholder:"请输入用户名"},model:{value:e.volForm.user_name,callback:function(t){e.$set(e.volForm,"user_name",t)},expression:"volForm.user_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:e.volForm.password,callback:function(t){e.$set(e.volForm,"password",t)},expression:"volForm.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"姓名",prop:"name"}},[a("el-input",{attrs:{placeholder:"请真实姓名！"},model:{value:e.volForm.name,callback:function(t){e.$set(e.volForm,"name",t)},expression:"volForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号",prop:"phone"}},[a("el-input",{attrs:{placeholder:"请输入手机号"},model:{value:e.volForm.phone,callback:function(t){e.$set(e.volForm,"phone",t)},expression:"volForm.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"年龄",prop:"age"}},[a("el-input",{attrs:{placeholder:"请输入年龄！"},model:{value:e.volForm.age,callback:function(t){e.$set(e.volForm,"age",e._n(t))},expression:"volForm.age"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"性别",prop:"gender"}},[a("el-radio-group",{model:{value:e.volForm.gender,callback:function(t){e.$set(e.volForm,"gender",t)},expression:"volForm.gender"}},[a("el-radio",{attrs:{label:0}},[e._v("男")]),e._v(" "),a("el-radio",{attrs:{label:1}},[e._v("女")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"用户角色",prop:"user_type"}},[a("el-radio-group",{model:{value:e.volForm.user_type,callback:function(t){e.$set(e.volForm,"user_type",t)},expression:"volForm.user_type"}},[a("el-radio",{attrs:{label:0}},[e._v("普通用户")]),e._v(" "),a("el-radio",{attrs:{label:1}},[e._v("管理员")])],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.addVol}},[e._v("添 加")])],1)],1)],1)},staticRenderFns:[]};var n=a("VU/8")(l,s,!1,function(e){a("2i7E")},"data-v-af0b1040",null);t.default=n.exports}});
//# sourceMappingURL=7.c1f438024cddbd2a38ab.js.map